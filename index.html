<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="mycss.css" rel="stylesheet" type="text/css">
    <script src="script.js"></script>
</head>
<body>
    <center>
        <h1><font color="red">Hello World!</font></h1>
    </center>
    <h3>
       <div id="friend">Friends</div>
    </h3>
    <div>
        <input type="checkbox" id="friendvis">
        <label for="textview">Show/hide text</label>
    </div>
    <div id="joe">My name is joe.</div>
    <br>
    <img src="mona_lisa.jpg" alt="Mona Lisa" id="monalisa">
    <br>
    <div id="sally">My best friend is Sally.</div>
    <br>
    <div>
        <input type="checkbox" id="imgview">
        <label for="imgview">Show/hide image</label>
    </div>
    <br>
    <div id="bob">My other friend is Bob.</div>
    <br>
    <br>
</body>

<script>
    document.getElementById('friendvis').checked = true;
    document.getElementById('friendvis').onclick = function() {
    if (document.getElementById('friend').checked == true) {
        document.getElementById('friend').style.visibility = 'visible';
    }
    else {
        document.getElementById('friend').style.visibility = 'hidden';
    }
    }

    document.getElementById('imgview').checked = true;
    document.getElementById('imgview').onclick = function() {
    if (document.getElementById('imgview').checked == true) {
        document.getElementById('monalisa').style.visibility = 'visible';
    }
    else {
        document.getElementById('monalisa').style.visibility = 'hidden';
    }
    }

    var image = document.getElementById("monalisa");
    image.addEventListener("load", function () {
        desaturateImage(image);
    });

    function desaturateImage(image) {
        var canvas = document.createElement('canvas');
        image.parentNode.insertBefore(canvas,image);
        canvas.width = image.width;
        canvas.height = image.height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(image, 0 ,0);
        
        var imgData = ctx.getImageData(0,0,canvas.width,canvas.height);

        for (var i = 0; i< imgData.data.length; i += 4) {
            var grey = 0.2500 * imgData.data[i] + 0.7152 * imgData.data[i+ 1] + 0.0722 * imgData.data[i + 2];
            grey = grey * 0.5;
            imgData.data[i] = grey;
            imgData.data[i+ 1] = grey;
            imgData.data[i+ 2] = grey;
        }

        ctx.putImageData(imgData, 0, 0);
    }
</script>
</html>